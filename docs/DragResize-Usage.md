# 拖拽调整面板宽度功能使用说明

## 功能概述

已成功为API调试工具的左侧历史记录面板和右侧响应展示面板添加了拖拽调整宽度功能，保持了原有的ant-design-vue Layout布局结构。

## 实现方案

### 🔧 技术实现
- **保持原有布局**：继续使用 `a-layout-sider` 组件，确保布局稳定性
- **添加拖拽手柄**：在每个面板边缘添加可拖拽的手柄
- **响应式宽度**：通过动态绑定 `:width` 属性实现宽度调整
- **状态持久化**：宽度设置自动保存到 localStorage

### 🎯 核心特性

#### 1. 拖拽调整宽度
- **左侧历史面板**：拖拽右边缘调整宽度（250px - 500px）
- **右侧响应面板**：拖拽左边缘调整宽度（300px - 800px）
- **实时反馈**：拖拽时显示蓝色手柄和背景高亮

#### 2. 视觉交互
- **悬停效果**：鼠标悬停时显示拖拽手柄
- **拖拽状态**：拖拽时手柄高亮，全局鼠标样式变为调整大小
- **平滑动画**：手柄出现/消失有平滑过渡效果

#### 3. 性能优化
- **节流处理**：拖拽事件使用16ms节流，确保60fps流畅度
- **防抖保存**：宽度变化后防抖保存到localStorage
- **内存管理**：组件卸载时自动清理所有事件监听器

#### 4. 兼容性支持
- **鼠标操作**：支持标准鼠标拖拽
- **触摸操作**：支持移动设备触摸拖拽
- **键盘支持**：拖拽时按ESC键取消操作
- **响应式设计**：在不同屏幕尺寸下自动调整手柄大小

## 使用方法

### 基本操作
1. **开始拖拽**：将鼠标悬停在面板边缘，看到拖拽手柄出现
2. **调整宽度**：按住鼠标左键拖拽手柄来调整面板宽度
3. **完成调整**：释放鼠标，新宽度自动保存
4. **取消操作**：拖拽过程中按ESC键可取消并恢复原宽度

### 宽度限制
- **左侧历史面板**：最小250px，最大500px
- **右侧响应面板**：最小300px，最大800px
- **自动约束**：拖拽时自动限制在有效范围内

### 状态保持
- **自动保存**：调整后的宽度自动保存到浏览器本地存储
- **页面刷新**：刷新页面后保持上次设置的宽度
- **独立存储**：左右面板宽度独立保存和恢复

## 主题适配

### 浅色主题
- 手柄颜色：浅灰色 (#d9d9d9)
- 悬停颜色：蓝色 (#1890ff)
- 背景高亮：浅蓝色半透明

### 深色主题
- 手柄颜色：深灰色 (#595959)
- 悬停颜色：深蓝色 (#177ddc)
- 背景高亮：深蓝色半透明

## 响应式设计

### 桌面端 (>768px)
- 手柄宽度：6px
- 手柄高度：60px
- 手柄线条：2px宽

### 移动端 (≤768px)
- 手柄宽度：8px
- 手柄高度：80px
- 手柄线条：3px宽

### 触摸设备
- 手柄宽度：12px
- 手柄高度：100px
- 手柄线条：4px宽

## 技术细节

### 事件处理
```javascript
// 节流处理拖拽事件
const handleMouseMove = throttle((e) => {
  updateWidth(e.clientX)
}, 16) // 60fps

// 防抖保存宽度
localStorage.setItem('historyPanelWidth', width.toString())
```

### 样式实现
```css
.resize-handle {
  position: absolute;
  cursor: col-resize;
  transition: all 0.2s ease;
}

.resize-handle:hover {
  background-color: rgba(24, 144, 255, 0.1);
}
```

### 兼容性处理
```javascript
// 支持鼠标和触摸事件
document.addEventListener('mousemove', handleMouseMove, { passive: false })
document.addEventListener('touchmove', handleTouchMove, { passive: false })
```

## 注意事项

1. **布局稳定性**：保持了原有的ant-design-vue Layout结构，确保布局稳定
2. **性能优化**：使用节流和防抖技术，避免频繁的DOM操作和存储写入
3. **内存安全**：组件卸载时自动清理所有事件监听器，防止内存泄漏
4. **用户体验**：提供视觉反馈和键盘支持，增强交互体验
5. **兼容性**：支持现代浏览器和移动设备，确保功能可用性

## 故障排除

如果拖拽功能不工作，请检查：
1. 浏览器是否支持现代JavaScript特性
2. 是否有其他CSS样式覆盖了拖拽手柄
3. 控制台是否有JavaScript错误
4. 面板是否处于折叠状态（折叠时不显示拖拽手柄）
